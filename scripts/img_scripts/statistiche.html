<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistiche immagini</title>
</head>
<body>
    <p>Apri la console per leggere le statistiche</p>

    <script>
        const path_to_json = "YOLO_detect/data_yolo.json"

        let count_images = 0
        let count_nofeat_img = 0
        let count_features = 0

        const labelOccurrences = {};

        fetch(path_to_json)
            .then(res => res.json())
            .then(data => {
                console.log(data)

                for (const item of data) {
                    count_images += 1

                    if (item.Objects && item.Objects.length > 0) {

                        for (const obj of item.Objects){
                            // console.log(obj)

                            label = item.Objects[0].label;
                            count_features += 1
                            
                            // conta quante feature sono presenti in tutte le foto
                            if (labelOccurrences[label]) {
                                labelOccurrences[label]++;
                            } else {
                                labelOccurrences[label] = 1;
                            }
                        }
                    }
                    else if (item.Objects.length <= 0) {
                        // conta le immagini che non hanno features
                        count_nofeat_img += 1
                    }
                
                }

                console.log('total images: ' + count_images)
                console.log('images with features: ' + (count_images - count_nofeat_img))
                console.log('images with no features: ' + count_nofeat_img)
                console.log('total features: ' + count_features)
                console.log(labelOccurrences);
            })  
    
    </script>
</body>
</html>
